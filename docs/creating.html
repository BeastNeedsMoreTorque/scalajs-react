<html><head><title>scalajs-react: Creating Components</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="aappddeevv" /><meta name="description" content="A react integration library for scala.js in the spirit of ReasonReact" /><meta name="og:image" content="/scalajs-react/img/poster.png" /><meta name="og:title" content="scalajs-react: Creating Components" /><meta name="og:site_name" content="scalajs-react" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="A react integration library for scala.js in the spirit of ReasonReact" /><link rel="icon" type="image/png" href="/scalajs-react/img/favicon.png" /><meta name="twitter:title" content="scalajs-react: Creating Components" /><meta name="twitter:image" content="img/poster.png" /><meta name="twitter:description" content="A react integration library for scala.js in the spirit of ReasonReact" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/scalajs-react/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/scalajs-react/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/scalajs-react/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/scalajs-react/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/scalajs-react/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/scalajs-react/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/scalajs-react/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/scalajs-react/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/scalajs-react/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/scalajs-react/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/scalajs-react/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/scalajs-react/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/scalajs-react/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/scalajs-react/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/scalajs-react/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/scalajs-react/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/scalajs-react/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/scalajs-react/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/scalajs-react/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/scalajs-react/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scalajs-react/highlight/styles/default.css" /><link rel="stylesheet" href="/scalajs-react/css/style.css" /><link rel="stylesheet" href="/scalajs-react/css/palette.css" /><link rel="stylesheet" href="/scalajs-react/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scalajs-react/" class="brand"><div class="brand-wrapper"><span>scalajs-react</span></div></a></li> <li><a href="/scalajs-react/docs/index.html" class="">Getting Started</a></li> <li><a href="/scalajs-react/docs/creating.html" class="">Creating scala.js Components</a></li> <li><a href="/scalajs-react/docs/importing.html" class="">Importing from JS</a></li> <li><a href="/scalajs-react/docs/exporting.html" class="">Exporting to JS</a></li> <li><a href="/scalajs-react/docs/styling.html" class="">Styling Suggestions</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/aappddeevv/scalajs-react"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/aappddeevv/scalajs-react"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('scalajs-react A react integration library for scala.js in the spirit of ReasonReact');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('scalajs-react A react integration library for scala.js in the spirit of ReasonReact');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="aappddeevv" data-github-repo="scalajs-react"><div class="content-wrapper"><section><p>Creating react components in scalajs-react uses a “builder” type pattern.</p>

<p>In scala.js, Component is just a “data structure” (a record really) that holds a few values and functions. A proxy is setup on the javascript side that forwards the react calls to the scala side Component. You can create the Component almost anyway you want but some functions are provided for convenience. It’s important to realize that the type parameters you provide are very different than those provided to other scala.js react facades as the API is very different as well. For example, scalajs-react includes a simple router in every component. There is also no <code class="highlighter-rouge">setState</code> API. Instead this has been replaced by a fine state machine.</p>

<p>It’s best to look to the <a href="https://reasonml.github.io/reason-react">ReasonReact</a> docs to understand the approach to creating Components in scala.js. It’s pretty much the same approach.</p>

<h2 id="creating-a-component">Creating a Component</h2>
<p>Here’s a simple example that uses a non-native JS trait for the props:</p>
<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="c1">// You can use individual props or a trait or a scala object.
// It's often convenient to use a subtype of js.Object
// non-native JS trait
</span><span class="k">trait</span> <span class="nc">ToDoProps</span> <span class="k">extends</span> <span class="n">js</span><span class="o">.</span><span class="nc">Object</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">todo</span><span class="k">:</span> <span class="kt">ToDo</span> <span class="c1">// has property "name"
</span>  <span class="k">val</span> <span class="n">remove</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=&gt;</span> <span class="nc">Unit</span>
  <span class="c1">// look no children on this props...
</span><span class="o">}</span>

<span class="k">object</span> <span class="nc">ToDoC</span> <span class="o">{</span>
  <span class="k">val</span> <span class="nc">ToDo</span> <span class="k">=</span> <span class="n">statelessComponent</span><span class="o">(</span><span class="s">"ToDo"</span><span class="o">)</span>
  <span class="c1">// def make(todo: ToDo, remove: Unit =&gt; Unit) =
</span>  <span class="c1">// or bundle them together into a trait
</span>  <span class="k">def</span> <span class="n">make</span><span class="o">(</span><span class="n">props</span><span class="k">:</span> <span class="kt">ToDoProps</span><span class="o">)</span> <span class="k">=</span>
    <span class="nc">ToDo</span><span class="o">.</span>
      <span class="o">.</span><span class="n">withRender</span><span class="o">{</span><span class="n">self</span> <span class="k">=&gt;</span> 
        <span class="o">&lt;.</span><span class="n">div</span><span class="o">(^.</span><span class="n">style</span> <span class="o">:=</span> <span class="nc">Style</span><span class="o">(</span><span class="s">"display"</span> <span class="o">:=</span> <span class="s">"flex"</span><span class="o">))(</span>
          <span class="nc">Label</span><span class="o">()(</span><span class="s">"Item:"</span><span class="o">),</span>
          <span class="nc">Label</span><span class="o">()(</span><span class="n">props</span><span class="o">.</span><span class="n">todo</span><span class="o">.</span><span class="n">name</span><span class="o">),</span>
          <span class="n">defaultButton</span><span class="o">(</span>
            <span class="n">F</span><span class="o">.</span><span class="n">text</span> <span class="o">:=</span> <span class="s">"Remove"</span><span class="o">,</span>
            <span class="o">^.</span><span class="n">onClick</span> <span class="o">==&gt;</span> <span class="o">((</span><span class="k">_:</span> <span class="kt">ReactEvent</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">props</span><span class="o">.</span><span class="n">remove</span><span class="o">(())))().</span><span class="n">toEl</span><span class="o">)}</span>
<span class="o">}</span>
</code></pre>
</div>
<p>You can pass in children via your ToDoProps or just add them to the make call, if you need children. Here’s an example where they are passed in as a <code class="highlighter-rouge">js.Array[]</code>.</p>
<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">make</span><span class="o">(</span><span class="n">props</span><span class="k">:</span> <span class="kt">ToDoProps</span><span class="o">,</span> <span class="n">children</span><span class="k">:</span> <span class="kt">js.Array</span><span class="o">[</span><span class="kt">ReactNode</span><span class="o">])</span> <span class="k">=</span>
  <span class="nc">ToDo</span>
    <span class="o">.</span><span class="n">withRender</span><span class="o">{</span><span class="n">self</span> <span class="k">=&gt;</span>
    <span class="o">}</span>
</code></pre>
</div>
<p>Or you can use the spread approach:</p>
<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">make</span><span class="o">(</span><span class="n">props</span><span class="k">:</span> <span class="kt">ToDoPropsp</span><span class="o">,</span> <span class="n">children</span><span class="k">:</span> <span class="kt">ReactNode*</span><span class="o">)</span> <span class="k">=</span>
  <span class="nc">ToDo</span>
    <span class="o">.</span><span class="n">withRendedr</span><span class="o">{</span><span class="n">self</span> <span class="k">=&gt;</span> 
    <span class="o">}</span>
</code></pre>
</div>

<h2 id="children">Children</h2>
<p>Children in scalajs-react are ReactNode or ReactElement (subclass of ReactNode). Whatever you do, you need to take your imported react components, your scalajs-react components and convert them to a ReactNode in order to use them as children in other scalajs-react components. You have a few ways of doing this.</p>

<ul>
  <li>Explicitly using the API: <code class="highlighter-rouge">createElement(YourComponentC.make(...))</code></li>
  <li>Using syntax: <code class="highlighter-rouge">YourComponentC.make(..).toEl</code>.</li>
  <li>Implicit conversions: <code class="highlighter-rouge">YourComponentC.make(...)</code></li>
</ul>

<p>Note that every child must be converted to a <code class="highlighter-rouge">ReactNode</code> type, including strings and numbers. There are some functions for doing that:</p>
<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">val</span> <span class="n">stringElement</span> <span class="k">=</span> <span class="n">stringToElement</span><span class="o">(</span><span class="s">"blah"</span><span class="o">)</span>
</code></pre>
</div>
<p>which can be quite verbose, hence the implicit conversions which will convert simple types to a <code class="highlighter-rouge">ReactNode</code>.</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scalajs-react/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/scalajs-react/js/main.js"></script></body></html>